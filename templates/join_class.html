{% extends "base.html" %}
{% block content %}
<h3>Join Classroom</h3>
<div class="card p-3 col-md-6">
    <input id="codeInput" class="form-control" placeholder="Enter classroom code (e.g. ABC123)">
    <div class="mt-3 text-end">
        <button id="joinBtn" class="btn btn-main">Join</button>
    </div>
</div>

<script>
document.getElementById('joinBtn').addEventListener('click', async ()=>{
    const code = document.getElementById('codeInput').value.trim().toUpperCase();
    if(!code) return alert('Enter code');
    const res = await fetch('/api/classes/join-class', {
        method:'POST',
        headers:{'Content-Type':'application/json'},
        body: JSON.stringify({classroom_code:code})
    });
    const j = await res.json();
    if(res.ok){
        alert('Joined class successfully');
        window.location.href = '/student/dashboard';
    } else {
        alert(j.error || j.message || 'Could not join');
    }
});
</script>
{% endblock %}
