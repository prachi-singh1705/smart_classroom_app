{% extends "base.html" %}
{% block content %}
<h3>Join Session</h3>
<div class="card p-3 col-md-6">
    <input id="sessionInput" class="form-control" placeholder="Enter session token (e.g. abc12xy9) or full URL">
    <div class="mt-3 text-end">
        <button id="joinBtn" class="btn btn-main">Join Session</button>
    </div>
</div>

<script>
document.getElementById('joinBtn').addEventListener('click', async ()=>{
    let t = document.getElementById('sessionInput').value.trim();
    if(!t) return alert('Enter session token or link');
    // If full URL, extract token last segment
    try{
        const url = new URL(t);
        t = url.pathname.split('/').filter(Boolean).pop();
    } catch(e){}
    // redirect
    window.location.href = '/session/' + t;
});
</script>
{% endblock %}
